(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{228:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return s}));var a=n(2),i=n(9),l=(n(0),n(237)),r={id:"dev-env-isolated",title:"Isolated Server"},o={id:"dev-env-isolated",isDocsHomePage:!1,title:"Isolated Server",description:"Zilliqa Isolated Server is a test server for dApp developers to quickly test their applications. Transactions are validated immediately, hence improving the productivity for dApp developers.",source:"@site/docs/dev-env-isolated.md",permalink:"/docs/dev-env-isolated",editUrl:"https://github.com/Zilliqa/dev-portal/docs/dev-env-isolated.md"},c=[{value:"Zilliqa Isolated Server Instructions",id:"zilliqa-isolated-server-instructions",children:[]},{value:"Install Scilla (Prerequisite)",id:"install-scilla-prerequisite",children:[]},{value:"Steps to Build &amp; Run Node",id:"steps-to-build--run-node",children:[]},{value:"Bootstrap Options",id:"bootstrap-options",children:[]},{value:"Dockerized Zilliqa Isolated Server",id:"dockerized-zilliqa-isolated-server",children:[]}],b={rightToc:c};function s(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"Zilliqa Isolated Server is a test server for dApp developers to quickly test their applications. Transactions are validated immediately, hence improving the productivity for dApp developers."),Object(l.b)("h2",{id:"zilliqa-isolated-server-instructions"},"Zilliqa Isolated Server Instructions"),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"This was tested on AWS EC2 t2.micro Ubuntu 16.04.6 LTS with 4GB swapfile")),Object(l.b)("h2",{id:"install-scilla-prerequisite"},"Install Scilla (Prerequisite)"),Object(l.b)("p",null,"Instructions below is only for Ubuntu 16.04 LTS"),Object(l.b)("p",null,"Please follow this link for the latest installation instructions for other OS. ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/Zilliqa/scilla/blob/master/INSTALL.md#ubuntu"}),"https://github.com/Zilliqa/scilla/blob/master/INSTALL.md#ubuntu")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),"cd /home/ubuntu\ngit clone https://github.com/Zilliqa/scilla.git\nsudo add-apt-repository ppa:tah83/secp256k1 -y //Ignore this line if you are building on Ubuntu 18\nsudo add-apt-repository -y ppa:avsm/ppa\nsudo apt-get update\nsudo apt-get install -y curl build-essential m4 ocaml opam pkg-config zlib1g-dev libgmp-dev libffi-dev libssl-dev libboost-system-dev libsecp256k1-dev libpcre3-dev\n\nopam init --compiler=4.06.1 --yes\neval $(opam env)\ncd scilla\nopam install ./scilla.opam --deps-only --with-test\nmake clean; make\n")),Object(l.b)("h2",{id:"steps-to-build--run-node"},"Steps to Build & Run Node"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},Object(l.b)("inlineCode",{parentName:"li"},"git clone https://github.com/Zilliqa/Zilliqa.git")),Object(l.b)("li",{parentName:"ol"},"cd ",Object(l.b)("inlineCode",{parentName:"li"},"Zilliqa")),Object(l.b)("li",{parentName:"ol"},"Edit the ",Object(l.b)("inlineCode",{parentName:"li"},"./constants.xml")," with the following attributes. Please take note of the directory where you installed scilla.")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),"<LOOKUP_NODE_MODE>true</LOOKUP_NODE_MODE>\n<ENABLE_SC>true</ENABLE_SC>\n<SCILLA_ROOT>/home/ubuntu/scilla</SCILLA_ROOT>\n<ENABLE_SCILLA_MULTI_VERSION>false</ENABLE_SCILLA_MULTI_VERSION>\n")),Object(l.b)("ol",{start:4},Object(l.b)("li",{parentName:"ol"},"Create swapfile")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),"// Recommended to have at least 4GB of free memory\n// You can skip if you have sufficient memory to build Zilliqa\n\nswapon --show\nsudo fallocate -l 4G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\nsudo cp /etc/fstab /etc/fstab.bak\nsudo vi /etc/fstab\n\n// add the following line into /etc/fstab\n/swapfile none swap sw 0 0\n\n// verify\nsudo swapon --show\n")),Object(l.b)("ol",{start:5},Object(l.b)("li",{parentName:"ol"},"Run ",Object(l.b)("inlineCode",{parentName:"li"},"./build.sh")," Build failures are mainly due to lack of memory. You can assign swap space if your hardware is lacking memory. (tested on AWS t2.micro with 4gb swap space)"),Object(l.b)("li",{parentName:"ol"},"Create the file that contains the bootstrap TEST ACCOUNTS ",Object(l.b)("inlineCode",{parentName:"li"},"vi isolated-server-accounts.json")," with the following json")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),'{\n    "7bb3b0e8a59f3f61d9bff038f4aeb42cae2ecce8": {\n        "privateKey": "db11cfa086b92497c8ed5a4cc6edb3a5bfe3a640c43ffb9fc6aa0873c56f2ee3",\n        "amount": "1000000000000000000",\n        "nonce": 0\n    },\n    "d90f2e538ce0df89c8273cad3b63ec44a3c4ed82": {\n        "privateKey": "e53d1c3edaffc7a7bab5418eb836cf75819a82872b4a1a0f1c7fcf5c3e020b89",\n        "amount": "1000000000000000000",\n        "nonce": 0\n    },\n    "381f4008505e940ad7681ec3468a719060caf796": {\n        "privateKey": "d96e9eb5b782a80ea153c937fa83e5948485fbfc8b7e7c069d7b914dbc350aba",\n        "amount": "1000000000000000000",\n        "nonce": 0\n    },\n    "b028055ea3bc78d759d10663da40d171dec992aa": {\n        "privateKey": "e7f59a4beb997a02a13e0d5e025b39a6f0adc64d37bb1e6a849a4863b4680411",\n        "amount": "1000000000000000000",\n        "nonce": 0\n    },\n    "f6dad9e193fa2959a849b81caf9cb6ecde466771": {\n        "privateKey": "589417286a3213dceb37f8f89bd164c3505a4cec9200c61f7c6db13a30a71b45",\n        "amount": "1000000000000000000",\n        "nonce": 0\n    },\n    "10200e3da08ee88729469d6eabc055cb225821e7": {\n        "privateKey": "5430365143ce0154b682301d0ab731897221906a7054bbf5bd83c7663a6cbc40",\n        "amount": "1000000000000000000",\n        "nonce": 0\n    },\n    "ac941274c3b6a50203cc5e7939b7dad9f32a0c12": {\n        "privateKey": "1080d2cca18ace8225354ac021f9977404cee46f1d12e9981af8c36322eac1a4",\n        "amount": "1000000000000000000",\n        "nonce": 0\n    },\n    "ec902fe17d90203d0bddd943d97b29576ece3177": {\n        "privateKey": "254d9924fc1dcdca44ce92d80255c6a0bb690f867abde80e626fbfef4d357004",\n        "amount": "1000000000000000000",\n        "nonce": 0\n    },\n    "c2035715831ab100ec42e562ce341b834bed1f4c": {\n        "privateKey": "b8fc4e270594d87d3f728d0873a38fb0896ea83bd6f96b4f3c9ff0a29122efe4",\n        "amount": "1000000000000000000",\n        "nonce": 0\n    },\n    "6cd3667ba79310837e33f0aecbe13688a6cbca32": {\n        "privateKey": "b87f4ba7dcd6e60f2cca8352c89904e3993c5b2b0b608d255002edcda6374de4",\n        "amount": "1000000000000000000",\n        "nonce": 0\n    }\n}\n')),Object(l.b)("ol",{start:7},Object(l.b)("li",{parentName:"ol"},"Run ",Object(l.b)("inlineCode",{parentName:"li"},"./build/bin/isolatedServer -f isolated-server-accounts.json &>> isolated-server.logs &")),Object(l.b)("li",{parentName:"ol"},"You should see the following in the log ",Object(l.b)("inlineCode",{parentName:"li"},"isolated-server.logs"))),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),"[32170][19-11-08T09:07:21.281][/AccountStore.cpp:53][AccountStore        ] Scilla IPC Server started successfully\n")),Object(l.b)("ol",{start:9},Object(l.b)("li",{parentName:"ol"},"Start development on ",Object(l.b)("inlineCode",{parentName:"li"},"http://<aws ec2 url>:5555"),"! Use the accounts found in ",Object(l.b)("inlineCode",{parentName:"li"},"./isolated-server-accounts.json"),"!")),Object(l.b)("h2",{id:"bootstrap-options"},"Bootstrap Options"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Accounts File : Use ",Object(l.b)("inlineCode",{parentName:"li"},"-f")," to refer to the location of json file containing accounts (Required)"),Object(l.b)("li",{parentName:"ul"},"Port : Use ",Object(l.b)("inlineCode",{parentName:"li"},"-p")," to configure the local port to start on (Default : 5555)"),Object(l.b)("li",{parentName:"ul"},"Initial Blocknumber : Use ",Object(l.b)("inlineCode",{parentName:"li"},"-b")," to configure the initial blocknumber which the server starts with (Default : 1)"),Object(l.b)("li",{parentName:"ul"},"Time increment : Use ",Object(l.b)("inlineCode",{parentName:"li"},"-t")," (t > 0) to configure automatic increment of blocknum (in ms) (Disabled by default) ")),Object(l.b)("h2",{id:"dockerized-zilliqa-isolated-server"},"Dockerized Zilliqa Isolated Server"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"boot.json")," contains default accounts"),Object(l.b)("p",null,"Build image"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},'docker build --rm -f "Dockerfile" -t isolatedserver:1 "."')),Object(l.b)("p",null,"Run by "),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"docker run -d -p 5555:5555 isolatedserver:1")),Object(l.b)("p",null,"Server will be accessible on ",Object(l.b)("inlineCode",{parentName:"p"},"http://localhost:5555")),Object(l.b)("p",null,"Available APIs"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"CreateTransaction")," : Input a transaction json payload"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"IncreaseBlocknum")," : Increase the blocknum by a given input"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"GetSmartContractSubState")," : Get the state of a smart contract"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"GetSmartContractCode")," : Get code at a given address"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"GetMinimumGasPrice")," : Get the minimum gas price"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"SetMinimumGasPrice"),": Set the minimum gas price"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"GetBalance"),": Get balance and nonce of a account"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"GetSmartContracts"),": get smart contract for an address"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"GetNetworkID")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"GetSmartContractInit")," : get init json for a SC."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"GetTransaction "),": Get Transaction info by hash")))}s.isMDXComponent=!0},237:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var a=n(0),i=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var b=i.a.createContext({}),s=function(e){var t=i.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=s(e.components);return i.a.createElement(b.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},u=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,r=e.parentName,b=c(e,["components","mdxType","originalType","parentName"]),d=s(n),u=a,m=d["".concat(r,".").concat(u)]||d[u]||p[u]||l;return n?i.a.createElement(m,o(o({ref:t},b),{},{components:n})):i.a.createElement(m,o({ref:t},b))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=u;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:a,r[1]=o;for(var b=2;b<l;b++)r[b]=n[b];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);