<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<title data-react-helmet="true">Testnet | Zilliqa Developer Portal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Testnet | Zilliqa Developer Portal"><meta data-react-helmet="true" name="description" content="Developer Testnet"><meta data-react-helmet="true" property="og:description" content="Developer Testnet"><meta data-react-helmet="true" property="og:url" content="https://dev.zilliqa.com/docs/dev-env-testnet"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://dev.zilliqa.com/docs/dev-env-testnet"><link rel="stylesheet" href="/styles.61ad20ac.css">
<link rel="preload" href="/styles.02de1ceb.js" as="script">
<link rel="preload" href="/runtime~main.32237694.js" as="script">
<link rel="preload" href="/main.3065d867.js" as="script">
<link rel="preload" href="/1.4ed8170a.js" as="script">
<link rel="preload" href="/2.b4fff381.js" as="script">
<link rel="preload" href="/98.5ddf222f.js" as="script">
<link rel="preload" href="/99.16543845.js" as="script">
<link rel="preload" href="/20ac7829.b3fe94c9.js" as="script">
<link rel="preload" href="/17896441.2c23e411.js" as="script">
<link rel="preload" href="/7c2f7b83.a4c9120c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/zilliqa-logo_1zilliqa-logo.png" alt="My Site Logo"><strong class="navbar__title">Zilliqa Developer Portal</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Basics</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/dev-started-introduction">Developers</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/mining-getting-started">Miners</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/exchange-getting-started">Exchanges</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/contribute-buildzil">Contributors</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/zilliqa-logo_1zilliqa-logo.png" alt="My Site Logo"><strong class="navbar__title">Zilliqa Developer Portal</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Basics</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/dev-started-introduction">Developers</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/mining-getting-started">Miners</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/exchange-getting-started">Exchanges</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/contribute-buildzil">Contributors</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Testnet</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="developer-testnet"></a>Developer Testnet<a aria-hidden="true" tabindex="-1" class="hash-link" href="#developer-testnet" title="Direct link to heading">#</a></h2><table><thead><tr><th align="left"></th><th align="left">URL(s)</th></tr></thead><tbody><tr><td align="left"><strong>API URL</strong></td><td align="left"><code>https://dev-api.zilliqa.com/</code></td></tr><tr><td align="left"><strong>Block Explorer</strong></td><td align="left"><a href="https://dev-explorer.zilliqa.com"><strong>Link</strong></a></td></tr><tr><td align="left"><strong>Faucet</strong></td><td align="left"><a href="https://dev-wallet.zilliqa.com"><strong>Link</strong></a></td></tr><tr><td align="left"><strong>WebSocket endpoint</strong></td><td align="left">wss://dev-ws.zilliqa.com</td></tr></tbody></table><p>The rest of the section contains operational scripts for running testnets on Kubernetes clusters running on AWS cloud.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="features"></a>Features<a aria-hidden="true" tabindex="-1" class="hash-link" href="#features" title="Direct link to heading">#</a></h2><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Easy-to-start working environment setup using Vagrant</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Kops workflow for managing small cluster (&lt;200) and production-ready high-availability cluster (1000+)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Automatic generated Kubernetes manifest and scripts for testnet running (via <code>bootstrap.py</code>)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Cluster sharing (via <code>kops/3_export_kubeconfig.sh</code> with cluster short name)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Testnet sharing (via <code>boostrap.py</code> with same options and name)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Third-party service integration<ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Datadog monitoring for master nodes in the cluster (additional setup required)</li></ul></li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Production-ready testnet<ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" checked="" disabled=""> AWS Load-balancer support (default to http)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Legitimate https certificate for load-balancers (use <code>--staging-https</code> or <code>--production-https</code>)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Up to 1000 nodes using host network mode (use <code>--host-network</code> to enable)</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Testnet nodes scheduling based on instance type (available when use manifest-based cluster) </li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="prerequisite"></a>Prerequisite<a aria-hidden="true" tabindex="-1" class="hash-link" href="#prerequisite" title="Direct link to heading">#</a></h2><p>A virtual-machine based working environment is provided via Vagrant, offering faster and eaiser setup for <strong>first-time</strong> user. All the dependencies (<code>kops</code>, <code>kubectl</code>, <code>docker</code>, and <code>awscli</code>) are included in the <code>Vagrantfile</code>.</p><p>Here&#x27;s a <strong>quick start</strong> for Ubuntu 16.04 users to get the Vagrant VM ready. </p><ol><li>Install vagrant and virtualbox</li></ol><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> vagrant virtualbox</span></div></div></div></div></div><ol start="2"><li>Clone this repository</li></ol><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone git@github.com:Zilliqa/testnet.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> testnet</span></div></div></div></div></div><ol start="3"><li>Provision the VM.</li></ol><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">vagrant up --provision</span></div></div></div></div></div><ol start="4"><li>Setup AWS credentials, read this AWS <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html">doc</a> to get your AWS access credentials</li></ol><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-console codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ vagrant ssh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Welcome to Ubuntu 16.04.5 LTS (GNU/Linux 4.4.0-139-generic x86_64)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Documentation:  https://help.ubuntu.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Management:     https://landscape.canonical.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Support:        https://ubuntu.com/advantage</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Get cloud support with Ubuntu Advantage Cloud Guest:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    http://www.ubuntu.com/business/services/cloud</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">7 packages can be updated.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">6 updates are security updates.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">New release &#x27;18.04.1 LTS&#x27; available.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Run &#x27;do-release-upgrade&#x27; to upgrade to it.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Last login: Tue Nov 20 13:26:01 2018 from 10.0.2.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">vagrant@ubuntu-xenial:/vagrant$ aws configure</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AWS Access Key ID [None]: ****************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AWS Secret Access Key [None]: ****************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Default region name [None]: us-west-2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Default output format [None]:</span></div></div></div></div></div><p>If there are any errors during the provision, try the following methods</p><ul><li>suspend (<code>vagrant suspend</code>) or halt (<code>vagrant halt</code>) the VM and run Step 3 &quot;<strong>Provision the VM</strong>&quot; again</li><li>or, destory (<code>vagrant destroy</code>) the VM and star over from the beginning.</li></ul><blockquote><p>❗ <strong>Warning</strong>: The following directories or files on your host machines are copied or synced to the VM</p><ul><li>Current working directory <code>.</code> is synced to VM&#x27;s <code>/vagrant</code></li><li><code>~/.ssh/id_rsa</code> is copied to <code>/home/vagrant/.ssh/id_rsa</code> (if you are using a different key for Github access, copy it manually)</li></ul></blockquote><p>Alternatively, if you prefer running everything on your host machine, you can still try the hard way.</p><ul><li><a href="https://github.com/kubernetes/kubectl" target="_blank" rel="noopener noreferrer">kubectl 1.10.6</a> (<a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl-binary-via-native-package-management" target="_blank" rel="noopener noreferrer">install</a>)</li><li><a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">docker</a> (<a href="https://docs.docker.com/install/" target="_blank" rel="noopener noreferrer">install</a> and <a href="https://docs.docker.com/install/linux/linux-postinstall/#manage-docker-as-a-non-root-user" target="_blank" rel="noopener noreferrer">post-install</a>)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="getting-started"></a>Getting Started<a aria-hidden="true" tabindex="-1" class="hash-link" href="#getting-started" title="Direct link to heading">#</a></h2><p>If you choose the Vagrant approach and have provisioned the VM, you can use the following commands:</p><ul><li><code>vagrant up</code> to start/resume the VM</li><li><code>vagrant ssh</code> to enter the VM</li><li><code>vagrant suspend</code> to save the state and suspend the VM</li><li><code>vagrant status</code> to check the current state of the VM</li></ul><p>Once you have the working environment ready using Vagrant VM or on you host machine, you can continue with the following steps:</p><ol><li><a href="#getting-a-kubernetes-cluster">Getting a Kubernetes cluster</a></li><li><a href="#getting-a-full-fledged-testnet">Getting a full-fledged testnet</a></li><li><a href="#debugging-the-testnet">Debugging the testnet</a></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="getting-a-kubernetes-cluster"></a>Getting a Kubernetes cluster<a aria-hidden="true" tabindex="-1" class="hash-link" href="#getting-a-kubernetes-cluster" title="Direct link to heading">#</a></h3><p>You can choose to use an existing Kubernetes cluster or launch a new cluster.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="option-1-using-an-existing-cluster"></a>Option 1: Using an existing cluster<a aria-hidden="true" tabindex="-1" class="hash-link" href="#option-1-using-an-existing-cluster" title="Direct link to heading">#</a></h4><p>Typically the admin of the cluster will provide a <a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank" rel="noopener noreferrer">kubeconfig</a> file with all the cluster access details.
The simplest way is to put it at <code>~/.kube/config</code> or properly store multiple according to <a href="https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/" target="_blank" rel="noopener noreferrer">this</a>.</p><details><summary>Here is an example of kubeconfig</summary><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">clusters</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">cluster</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">certificate-authority-data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &lt;redacted</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">//1.1.1.1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token number" style="color:rgb(247, 140, 108)">443</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">cluster</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">contexts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">cluster</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">cluster</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> admin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">context</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">current-context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">context</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">preferences</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">users</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> admin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">as-user-extra</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># used for kubernetes dashboard login</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Ykf8Esxd8sieWHneOdWdCsBCyOE8GyNp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> admin</span></div></div></div></div></div></details><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="option-2-launching-a-new-cluster"></a>Option 2: Launching a new cluster<a aria-hidden="true" tabindex="-1" class="hash-link" href="#option-2-launching-a-new-cluster" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="step-1-genearting-a-cluster-directory-with-bootstrappy---cluster-modetrue"></a>Step 1: Genearting a cluster directory with <code>bootstrap.py --cluster-mode=true</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-1-genearting-a-cluster-directory-with-bootstrappy---cluster-modetrue" title="Direct link to heading">#</a></h5><p>Run <code>bootstrap.py --cluster-mode true</code> with other cluster options to generate a cluster directory. Three different grades (development, preview, and production) of clusters are supported through the option <code>--cluster-grade</code>, which helps to decide the detailed specification for the cluster.</p><ul><li><p>Generate the directory for a development cluster with random name, specified name (e.g., <code>apple</code>), or more worker machines</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># dev cluster, named random string, 25 worker machines</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./bootstrap.py --cluster-mode </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># dev cluster, named `apple`, 25 worker machines</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./bootstrap.py apple --cluster-mode </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># dev cluster, named `apple`, 100 worker machines</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./bootstrap.py apple --cluster-mode </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> --worker-machine </span><span class="token number" style="color:rgb(247, 140, 108)">100</span></div></div></div></div></div></li><li><p>Generate the directory for a preview cluster with more control on machines</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./bootstrap.py --cluster-mode </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> --cluster-grade pre --worker-machine </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain"> --lookup-machine </span><span class="token number" style="color:rgb(247, 140, 108)">20</span></div></div></div></div></div></li></ul><p>Some important options for cluster-mode:</p><ul><li><code>--host-network</code>: Configure the cluster to allow host-network for testnet. Default to <code>false</code>.</li><li><code>--monitoring</code>: Install monitoring addons for the cluster, whici can be accessed after testnet bootstrapping via <code>./testnet.sh dashboard</code>. Default to <code>false</code>.</li></ul><p>The different between <code>development</code>, <code>preview</code> and <code>production</code> grade clusters are listed here.</p><table><thead><tr><th>node type</th><th>development</th><th>preview</th><th>production</th></tr></thead><tbody><tr><td>master node</td><td>(<code>c5.xlarge</code> ~ <code>c5.9xlarge</code>)</td><td><code>c5.18xlarge</code></td><td><code>c5.18xlarge</code></td></tr><tr><td>shard node</td><td><code>t2.medium</code></td><td><code>t2.medium</code></td><td><code>t2.medium</code></td></tr><tr><td>web node</td><td><code>t2.medium</code></td><td><code>m5.large</code></td><td><code>m5.xlarge</code></td></tr><tr><td>DS guard node</td><td>N/A</td><td><code>t2.medium</code></td><td><code>m5.xlarge</code></td></tr><tr><td>multiplier node</td><td>N/A</td><td><code>m5.large</code></td><td><code>m5.xlarge</code></td></tr><tr><td>lookup node</td><td>N/A</td><td><code>m5.large</code></td><td><code>m5.4xlarge</code></td></tr><tr><td>seed node</td><td>N/A</td><td><code>m5.large</code></td><td><code>m5.2xlarge</code></td></tr><tr><td>lookup node (hidden)</td><td>N/A</td><td><code>m5.large</code></td><td><code>m5.2xlarge</code></td></tr></tbody></table><p>Here are the parameters used for setting the number of machines used. Note that some of node type will share the same machine parameter.</p><table><thead><tr><th>node type</th><th>development</th><th>preview</th><th>production</th></tr></thead><tbody><tr><td>master node</td><td>1</td><td>1</td><td>3</td></tr><tr><td>shard node</td><td><code>--worker-machine</code></td><td><code>--worker-machine</code></td><td><code>--worker-machine</code></td></tr><tr><td>web node</td><td><code>--network-io-machine</code></td><td><code>--network-io-machine</code></td><td><code>--network-io-machine</code></td></tr><tr><td>DS guard node</td><td>N/A</td><td><code>--ds-guard-machine</code></td><td><code>--ds-guard-machine</code></td></tr><tr><td>multiplier node</td><td>N/A</td><td><code>--network-io-machine</code></td><td><code>--network-io-machine</code></td></tr><tr><td>lookup node</td><td>N/A</td><td><code>--lookup-machine</code></td><td><code>--lookup-machine</code></td></tr><tr><td>seed node</td><td>N/A</td><td><code>--internal-lookup-machine</code></td><td><code>--internal-lookup-machine</code></td></tr><tr><td>lookup node (hidden)</td><td>N/A</td><td><code>--internal-lookup-machine</code></td><td><code>--internal-lookup-machine</code></td></tr></tbody></table><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="step-2-running-your-cluster"></a>Step 2: Running your cluster<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-2-running-your-cluster" title="Direct link to heading">#</a></h5><p>Once you have the generated cluster directory, you can simply launch the cluster through</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./cluster.sh up</span></div></div></div></div></div><p>or terminate it</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./cluster.sh down</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="getting-a-full-fledged-testnet"></a>Getting a full-fledged testnet<a aria-hidden="true" tabindex="-1" class="hash-link" href="#getting-a-full-fledged-testnet" title="Direct link to heading">#</a></h3><p>Firstly, run <code>kubectl cluster-info</code> to verify your access to the Kubernetes cluster you launched or configured. Then, run the steps below. </p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="step-1-generating-a-testnet-directory-with-bootstrappy"></a>Step 1: Generating a testnet directory with <code>bootstrap.py</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-1-generating-a-testnet-directory-with-bootstrappy" title="Direct link to heading">#</a></h4><p>Simply run <code>./bootstrap.py</code>.</p><p>You can use most of the default options there for small-scale testnet, but you should specify the zilliqa image you want to test. For example, if you want to test a specific zilliqa version (<code>f2d4a8a</code> or <code>f2d4a8aed74851f3f0acaa9724878257eb6c4ee5</code>), there are two ways of doing this:</p><ul><li><p>Use <code>-c,--commit</code> to set the commit SHA1</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># use short format</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./bootstrap.py -c f2d4a8a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ues long format</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./bootstrap.py -c f2d4a8aed74851f3f0acaa9724878257eb6c4ee5</span></div></div></div></div></div></li><li><p>Not only use <code>-c,--commit</code> to set SHA1, but also use <code>-i,--image</code> to overwrite the image URL</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># only short format</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./bootstrap.py -c f2d4a8a -i </span><span class="token number" style="color:rgb(247, 140, 108)">648273915458</span><span class="token plain">.dkr.ecr.us-west-2.amazonaws.com/zilliqa:f2d4a8a</span></div></div></div></div></div></li></ul><blockquote><p>Note: You have to run <a href="https://github.com/Zilliqa/Zilliqa/blob/master/scripts/make_image.sh"><code>scripts/make_image.sh</code></a> from core repository before you can use the image.</p></blockquote><details><summary> All options of bootstrap.py are here</summary><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">❯ ./bootstrap.py -h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">usage: bootstrap.py name [-n num] [-d num] [-l num] [-a num] [-c commit]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">bootstrap a small/large testnet</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">positional arguments:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  NAME                  testnet name (default: 5-letter random string)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">optional arguments:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -h, --help            show this help message and exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Testnet Specification:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -t small/large, --template small/large</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        template folder selection (default: small)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -n INTEGER            number of normal nodes (default: 20)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -d INTEGER            number of ds nodes within normal nodes (default: 10)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -l INTEGER            number of lookup nodes (default: 1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -a INTEGER            number of archival nodes (default: 1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -p PORT, --port PORT  the host network port used for zilliqa app (default:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        30303 or 32768-65535 when in host network mode)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tesntet Image:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  To reference the Zilliqa image version in testnet, -c is required. In</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  addition, you may use -i to overwrite the image URL however -c is still</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  needed in fetching constants.xml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -c COMMIT, --commit COMMIT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        Set the commit SHA1 from</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        https://github.com/Zilliqa/Zilliqa.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -i IMAGE, --image IMAGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        Set the image URL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Testnet features:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --gentxn {true, false}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        enable/disable gentxn (default: true)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --recovery {true, false}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        enable/disable recovery (default: false)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --daemon {true, false}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        enable/disable daemon monitoring zilliqa process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        (default: false)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --wallet {true, false}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        enable/disable wallet (default: false)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --scilla-wallet {true, false}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        enable/disable scilla wallet (default: false)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --host-network {true, false}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        enable/disable host network mode for testnet (default:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        false)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --https {aws.z7a.xyz,aws.zilliqa.com}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        use https and select domain in ELB urls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --elb-logs {true, false}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        enable/disable elb access logging in S3 bucket &quot;elb-</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        logs.k8s.z7a.xyz&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --clusters CLUSTER1,CLUSTER2,...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        set the list of clusters, in which the first will be</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        primary and the rest will be secondary</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --lookup-multiplier {true, false}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        enable/disable lookup multiplier and level-2 lookup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Miscellaneous:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --genkeypair GENKEYPAIR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        path to genkeypair binary</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -f, --force           skip checking the latest master</span></div></div></div></div></div></details><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="step-2-running-your-testnet-in-the-testnet-directory"></a>Step 2: Running your testnet in the testnet directory<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-2-running-your-testnet-in-the-testnet-directory" title="Direct link to heading">#</a></h4><p>The testnet directory contains <code>configmap/</code>, <code>manifest/</code> and a single script <code>testnet.sh</code>.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├── configmap          # a dir to be mounted to `/etc/zilliqa` in the container</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── constants.xml  # copied from template (small/large)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── constants.xml.1fb077b         # fetched from the commit 1fb077b</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── constants_local.xml.1fb077b   # fetched from the commit 1fb077b</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── keys.txt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── init.py</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">├── manifest           #</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── explorer.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── lookup.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── new.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── normal.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── scilla-wallet.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── services.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── wallet.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">└── testnet.sh</span></div></div></div></div></div><p>In <code>configmap/</code>, the file <code>constants.xml</code> is generated by the scripts and will be used when running the zilliqa node in containers. There are also two reference constants file fetched from the commit you specified through <code>-c,--commit</code>.</p><p>In <code>manifest/</code>, each <code>.yaml</code> file contains a component of the testnet. Note that <code>services.yaml</code> is fundamental and needed by most of other components.</p><p>The single script <code>testnet.sh</code> wraps most of the <code>kubectl</code> commands and provide handy subcommmands for testnet management.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">❯ ./testnet.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Usage: ./testnet.sh subcommand [ARGS]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Available subcommands:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    up              bring up all the components for testnet</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    down            tear down all the components for testnet</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    reload          reload the configmap from local</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    restart         restart the nodes without affecting other components</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    new             launch new nodes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    create          create configmap/ or manifest/*.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    delete          delete configmap/ or manifest/*.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    force-delete    force delete configmap/ or manifest/*.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ssh             get ssh access into zilliqa nodes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    logs            get kubernetes logs of zilliqa nodes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    who             find out who is using the IP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    where           find out where are the pods running</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    all             show the testnet components status</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    status          show the testnet nodes status</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    url             show the testnet urls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    dashboard       show the kuberentes dashboard and credentials</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sync-primary    get the necessary information from primary testnet</span></div></div></div></div></div><p>Here are some most-frequently-used subcommands for changing the testnet status.</p><ul><li><code>./testnet.sh up</code> to launch the testnet with all the components</li><li><code>./testnet.sh down</code> to fully delete the testnet</li><li><code>./testnet.sh reload</code> after you edit anything in <code>configmap/</code></li><li><code>./testnet.sh restart</code> to only restart the zilliqa nodes (not other componenets)</li><li><code>./testnet.sh new N</code> to launch N new nodes after the testnet is running</li></ul><p>And a few commands for read-only options</p><ul><li><code>./testnet.sh all</code> to show the status of all the components</li><li><code>./testnet.sh status</code> to show the status of all the zilliqa nodes</li><li><code>./testnet.sh status --epoch</code> to show the latest epoch number on each node</li><li><code>./testnet.sh status --recovery</code> to show the recovery time on each node</li><li><code>./testnet.sh url</code> to show all the load-balancer urls</li></ul><p>If you prefer GUI, login in the Kubernetes Web dashbaord using the url and credentials from <code>./testnet.sh dashboard</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">❯ ./testnet.sh dashboard</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dashboard: https://api.cluster.k8s.z7a.xyz/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/#!/search?namespace=default&amp;q=work</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">username: admin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">password: 48VyHgOsW6wS9oRYEBFY7KXBY0andakL</span></div></div></div></div></div><p>For advanced users, you can use <code>./testnet.sh create|delete|force-delete</code> to invidually create or delete either the <code>configmap</code> or the components in <code>manifest/</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="debugging-the-testnet"></a>Debugging the testnet<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debugging-the-testnet" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="debugging-kubernetes-componenets"></a>Debugging Kubernetes componenets<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debugging-kubernetes-componenets" title="Direct link to heading">#</a></h4><details><summary>Here&#x27;s an example output of `./testnet.sh all`</summary><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">❯ ./testnet.sh all</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                                  READY     STATUS     RESTARTS   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-explorer-7b9445cfc9-z6fnr   0/1       Init:0/1   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-lookup-0                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-0                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-1                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-10                   2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-11                   2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-12                   2/2       Running    1          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-13                   2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-14                   2/2       Running    1          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-15                   2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-16                   2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-17                   2/2       Running    1          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-18                   2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-19                   2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-2                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-3                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-4                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-5                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-6                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-7                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-8                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-normal-9                    2/2       Running    0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pod/jeacm-wallet-5cd48fdd97-mxv24     0/1       Init:0/1   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     TYPE           CLUSTER-IP       EXTERNAL-IP        PORT(S)          AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">service/jeacm            ClusterIP      None             &lt;none&gt;             30303/TCP        2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">service/jeacm-api        LoadBalancer   100.64.150.112   ae4924e507b8c...   4201:32085/TCP   2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">service/jeacm-explorer   LoadBalancer   100.68.113.147   ae4b3df2e7b8c...   80:30859/TCP     2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">service/jeacm-wallet     LoadBalancer   100.64.227.229   ae53303447b8c...   80:31719/TCP     2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                                        DESIRED   CURRENT   READY     AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">replicaset.apps/jeacm-explorer-7b9445cfc9   1         1         0         2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">replicaset.apps/jeacm-wallet-5cd48fdd97     1         1         0         2m</span></div></div></div></div></div></details><p>When you see the resources are having abnormal <code>STATUS</code> (e.g., <code>Init:0/1</code>) or in the state of not <code>READY</code> (e.g., <code>1/2</code>), you can check their logs via <code>./testnet.sh logs TYPE INDEX</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># check the log of the 0th lookup node</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./testnet.sh logs lookup </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># check the log of the 18th normal node</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./testnet.sh logs normal </span><span class="token number" style="color:rgb(247, 140, 108)">0</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="debugging-within-the-container"></a>Debugging within the container<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debugging-within-the-container" title="Direct link to heading">#</a></h4><p>If you want to get in the node for further debugging, just run <code>./testnet.sh ssh TYPE INDEX</code>.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># ssh into the 0th lookup node </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./testnet.sh ssh lookup 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># ssh into the 18th normal node</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./testnet.sh ssh normal 18</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Zilliqa/dev-portal/docs/dev-env-testnet.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#developer-testnet" class="table-of-contents__link">Developer Testnet</a></li><li><a href="#features" class="table-of-contents__link">Features</a></li><li><a href="#prerequisite" class="table-of-contents__link">Prerequisite</a></li><li><a href="#getting-started" class="table-of-contents__link">Getting Started</a><ul><li><a href="#getting-a-kubernetes-cluster" class="table-of-contents__link">Getting a Kubernetes cluster</a></li><li><a href="#getting-a-full-fledged-testnet" class="table-of-contents__link">Getting a full-fledged testnet</a></li><li><a href="#debugging-the-testnet" class="table-of-contents__link">Debugging the testnet</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a href="https://blog.zilliqa.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/zilliqa" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/invite/BnVzu5W" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://t.me/ZilliqaDevs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/zilliqa" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCvinnFbf0u71cajoxKcfZIQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Zilliqa Research Pte. Ltd.</div></div></div></footer></div>
<script src="/styles.02de1ceb.js"></script>
<script src="/runtime~main.32237694.js"></script>
<script src="/main.3065d867.js"></script>
<script src="/1.4ed8170a.js"></script>
<script src="/2.b4fff381.js"></script>
<script src="/98.5ddf222f.js"></script>
<script src="/99.16543845.js"></script>
<script src="/20ac7829.b3fe94c9.js"></script>
<script src="/17896441.2c23e411.js"></script>
<script src="/7c2f7b83.a4c9120c.js"></script>
</body>
</html>