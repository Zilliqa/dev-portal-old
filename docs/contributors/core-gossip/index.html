<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="search" type="application/opensearchdescription+xml" title="Zilliqa Developer Portal" href="/opensearch.xml"><title data-react-helmet="true">Gossip | Zilliqa Developer Portal</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Gossip | Zilliqa Developer Portal"><meta data-react-helmet="true" name="description" content="Core protocol design - gossip."><meta data-react-helmet="true" property="og:description" content="Core protocol design - gossip."><meta data-react-helmet="true" name="keywords" content="core,gossip"><meta data-react-helmet="true" property="og:url" content="https://dev.zilliqa.com/docs/contributors/core-gossip"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://dev.zilliqa.com/docs/contributors/core-gossip"><link rel="stylesheet" href="/styles.90e6c070.css">
<link rel="preload" href="/styles.e6d5f6ad.js" as="script">
<link rel="preload" href="/runtime~main.cfd4d3b6.js" as="script">
<link rel="preload" href="/main.1791fe9a.js" as="script">
<link rel="preload" href="/1.572a4dde.js" as="script">
<link rel="preload" href="/2.69025b56.js" as="script">
<link rel="preload" href="/194.93b79b72.js" as="script">
<link rel="preload" href="/195.8bbd0729.js" as="script">
<link rel="preload" href="/20ac7829.3f24c2c8.js" as="script">
<link rel="preload" href="/17896441.4d4153da.js" as="script">
<link rel="preload" href="/2171d30c.c8a81abc.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Zilliqa Logo"><strong class="navbar__title">Zilliqa Developer Portal</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/basics/basics-intro-blockchain">Basics</a><a class="navbar__item navbar__link" href="/docs/dev/dev-started-introduction">Developers</a><a class="navbar__item navbar__link" href="/docs/apis/api-introduction">APIs</a><a class="navbar__item navbar__link" href="/docs/miners/mining-getting-started">Miners</a><a class="navbar__item navbar__link" href="/docs/exchanges/exchange-getting-started">Exchanges</a><a class="navbar__item navbar__link" href="/docs/staking/staking-overview">Staking</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/contributors/contribute-buildzil">Contributors</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Zilliqa Logo"><strong class="navbar__title">Zilliqa Developer Portal</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/basics/basics-intro-blockchain">Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dev/dev-started-introduction">Developers</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/apis/api-introduction">APIs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/miners/mining-getting-started">Miners</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/exchanges/exchange-getting-started">Exchanges</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/staking/staking-overview">Staking</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/contributors/contribute-buildzil">Contributors</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributors</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/contribute-buildzil">Building Zilliqa</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/contribute-guidelines">Contribution Guidelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/contribute-standards">Protocol Standards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/contribute-bug-bounty">Bug Bounty Program</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Core Protocol Design</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Design Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-node-operation">General Node Operation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Consensus Layer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-consensus">Consensus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-multisignatures">Multisignatures</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Network Layer</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/contributors/core-gossip">Gossip</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributors/core-broadcasting">Broadcasting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributors/core-blacklist">Blacklist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributors/core-messaging-limits">Messaging Limits</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Messaging Layer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-message-dispatch">Message Dispatch and Processing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-message-queues">Message Queues and Jobs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Data Layer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-incremental-db">Incremental DB</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Directory Service</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-ds-mimo">DS MIMO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-ds-reputation">DS Reputation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Lookup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-websocket-server">WebSocket Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-transaction-dispatch">Transaction Dispatch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-multipliers">Multipliers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Mining</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-pow">PoW Algorithm</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-difficulty-adjustment">Difficulty Adjustment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-por">Proof of Reputation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-coinbase">Coinbase Rewards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-global-gas-price">Global Gas Price</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Mitigation Measures</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-guard-mode">Guard Mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-rejoin-mechanism">Rejoin Mechanism</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-view-change">View Change</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-diagnostic-data">Diagnostic Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributors/core-status-server">Status Server</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Gossip</h1></header><div class="markdown"><hr><p>A <code>RumorManager</code> library is available in the Zilliqa core to support message gossiping between nodes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="overview"></a>Overview<a aria-hidden="true" tabindex="-1" class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><ul><li>The goal is to provide an alternative communication method to broadcasting, particularly in large-scale clusters.</li><li>The broadcasting implemented in <code>P2PComm::SendBroadcastMessage</code> is resource-hungry; it sends <code>O(n^2)</code> messages, requires a lot of threads, and opens too many TCP connections.</li><li>The gossip algorithm, described in detail in this <a href="https://zoo.cs.yale.edu/classes/cs426/2013/bib/karp00randomized.pdf">paper</a>, provides a method to spread a message in <code>O(logn)</code> rounds and <code>O(ln(ln(n)))</code> rumor messages (where <code>n</code> is the number of peers participating in the gossip).</li><li><code>RumorManager</code> plays the role of managing all the gossips/rumors and their states.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="interfaces"></a>Interfaces<a aria-hidden="true" tabindex="-1" class="hash-link" href="#interfaces" title="Direct link to heading">#</a></h2><p>The following interfaces are exposed for a node to enable gossiping messages in the network.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="initializerumormanager"></a>InitializeRumorManager<a aria-hidden="true" tabindex="-1" class="hash-link" href="#initializerumormanager" title="Direct link to heading">#</a></h3><p>Every node in the network intializes <code>RumorManager</code> with the list of peers from their own shard or committee at the start of a new DS epoch (or after a successful view change).</p><p>Initialization involves the following:</p><ul><li>Storing peer list</li><li>Storing public keys of the peers in the peer list, the DS committee members, and lookup nodes</li><li>Storing the node&#x27;s own peer information and key pair</li><li>Starting of rounds (that runs a loop every <code>ROUND_TIME_IN_MS</code> ms), which includes:<ul><li>Checking the state of every rumor in <code>RumorHolder</code> and sending to <code>MAX_NEIGHBORS_PER_ROUND</code> random peers (if the rumor is not old enough).</li><li><code>RumorHolder</code> monitors/changes the state of each rumor it holds using the Median Counter algorithm (as explained in Section 3 of the whitepaper) for every round.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="spreadrumor"></a>SpreadRumor<a aria-hidden="true" tabindex="-1" class="hash-link" href="#spreadrumor" title="Direct link to heading">#</a></h3><p>This enables the node to initiate the rumor to be gossiped with its peer list. It will basically add the rumor to <code>RumorHolder</code>, which in turn manages its states and further gossiping.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="spreadforeignrumor"></a>SpreadForeignRumor<a aria-hidden="true" tabindex="-1" class="hash-link" href="#spreadforeignrumor" title="Direct link to heading">#</a></h3><p>This enables the node to initiate spreading of the rumor received from a node that is not part of its peer list (hence, &quot;foreign&quot;). It verifies the sender node against all the public keys stored during the initialization of <code>RumorManager</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="stoprounds"></a>StopRounds<a aria-hidden="true" tabindex="-1" class="hash-link" href="#stoprounds" title="Direct link to heading">#</a></h3><p>Stops the gossip round, thereby stopping the gossiping of rumors to peers.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="rumor-state-machine"></a>Rumor State Machine<a aria-hidden="true" tabindex="-1" class="hash-link" href="#rumor-state-machine" title="Direct link to heading">#</a></h2><p>The rumor state machine is managed by <code>RumorHolder</code>.</p><p>Every rumor will be in one of following states at any time:</p><ul><li><code>NEW</code>: The peer <code>v</code> knows <code>r</code> and <code>counter(v,r) = m</code> (age/round)</li><li><code>KNOWN</code>: Cooling state; stay in this state for <code>m_maxRounds</code> rounds, and participate in rumor spreading</li><li><code>OLD</code>: Final state; member stops participating in rumor spreading</li></ul><p>Every rumor starts in the <code>NEW</code> state. It either stays in this state, or moves on to <code>KNOWN</code> or <code>OLD</code> state immediately or in successive rounds based on the algorithm mentioned in the whitepaper. Every rumor is tied up with the round (consider it as the rumor age).</p><p>A rumor is configured to stay in <code>NEW</code> and <code>KNOWN</code> state for a maximum of <code>&lt;MAX_ROUNDS_IN_BSTATE&gt;</code> and <code>&lt;MAX_ROUNDS_IN_CSTATE&gt;</code>, respectively.
The total rounds is configured to not exceed <code>&lt;MAX_TOTAL_ROUNDS&gt;</code>, after which the rumor is marked as <code>OLD</code>. These settings are found in the node&#x27;s constants file, like thus:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-xml codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">gossip_custom_rounds</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">MAX_ROUNDS_IN_BSTATE</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">2</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">MAX_ROUNDS_IN_BSTATE</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">MAX_ROUNDS_IN_CSTATE</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">3</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">MAX_ROUNDS_IN_CSTATE</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">MAX_TOTAL_ROUNDS</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">6</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">MAX_TOTAL_ROUNDS</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">gossip_custom_rounds</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="gossip-message-format"></a>Gossip Message Format<a aria-hidden="true" tabindex="-1" class="hash-link" href="#gossip-message-format" title="Direct link to heading">#</a></h2><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>START_BYTE_GOSSIP</td><td>0x33 (indicates gossip message type)</td></tr><tr><td>HDR</td><td>Message header</td></tr><tr><td>GOSSIP_MSGTYPE</td><td>See next section</td></tr><tr><td>GOSSIP_ROUND</td><td>Rumor age (as per sender of message)</td></tr><tr><td>GOSSIP_SNDR_PORT</td><td>Listening port of sender</td></tr><tr><td>PUB_KEY</td><td>Sender&#x27;s public key</td></tr><tr><td>SIGNATURE</td><td>Signature over the payload</td></tr><tr><td>Payload</td><td>Rumor to be gossiped</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="optimized-pull-push-mechanism"></a>Optimized Pull-Push Mechanism<a aria-hidden="true" tabindex="-1" class="hash-link" href="#optimized-pull-push-mechanism" title="Direct link to heading">#</a></h2><p><code>GOSSIP_MSGTYPE</code> can refer to any of the following:</p><ul><li><code>PUSH (0x01)</code>: The response to a <code>PULL</code> request. The payload contains the raw message. It is sent out to the requesting peer.</li><li><code>PULL (0x02)</code>: The request for the raw message for a given hash. The payload contains the hash. It is sent out in response to the node who sent <code>LAZY_PUSH</code> or <code>LAZY_PULL</code>.</li><li><code>EMPTY_PUSH (0x03)</code>: This is sent out at every round to random neighbors if the node does not have any active rumors in its store. It indicates asking for any rumors from the node&#x27;s neighbors. The payload contains unused dummy data.</li><li><code>EMPTY_PULL (0x04)</code>: This is sent out to the sender of <code>EMPTY_PULL</code> or <code>LAZY_PULL</code> to indicate that it doesn&#x27;t have any active rumors either. The payload contains unused dummy data.</li><li><code>FORWARD (0x05)</code>: A special type that indicates that the message being sent out is from a foreign peer. This means the sender does not belong to the current shard or committee. Normally it is sent from a lookup to a shard or DS committee node, or between a shard node and DS committee node (in either direction).</li><li><code>LAZY_PUSH (0x06)</code>: This is sent out at every round to random neighbors for each active rumor in its store. The payload contains the hash of the raw message intended to be gossiped.</li><li><code>LAZY_PULL (0x07)</code>: The response to the sender if it is the first time that sender has sent a <code>LAZY_PUSH</code>/<code>EMPTY_PUSH</code> message during this round. The payload contains the hash of the raw message.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Every gossip message is signed, and the signature is verified before being accepted.</p></div></div><p>Through the messages above, the standard Push-Pull mechanism is optimized by gossiping the hashes using <code>EMPTY_*</code> and <code>LAZY_*</code> and fetching the actual raw messages using <code>PUSH</code> and <code>PULL</code>.</p><p>So, <code>LAZY_PUSH</code> and <code>LAZY_PULL</code> are the backbone for gossiping of hashes, and are the only gossip messages that have a valid <code>GOSSIP_ROUND</code> for their underlying rumor (i.e., the hash). For the other message types, <code>GOSSIP_ROUND</code> is just set to -1 since it has no use in these types.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="message-subscription"></a>Message Subscription<a aria-hidden="true" tabindex="-1" class="hash-link" href="#message-subscription" title="Direct link to heading">#</a></h2><p>Due to the nature of quick gossip, it&#x27;s possible that a node might have just the hash and not the raw message yet at a particular point in time. In such cases, if the node receives a <code>PULL</code> message for that hash, it adds that node to a subscription list. As soon as the node receives the raw message for that hash, it then sends it out to all the peers in the subscription list.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Zilliqa/dev-portal/tree/master/docs/contributors/core-gossip.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/contributors/core-multisignatures"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Multisignatures</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/contributors/core-broadcasting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Broadcasting »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#interfaces" class="table-of-contents__link">Interfaces</a><ul><li><a href="#initializerumormanager" class="table-of-contents__link">InitializeRumorManager</a></li><li><a href="#spreadrumor" class="table-of-contents__link">SpreadRumor</a></li><li><a href="#spreadforeignrumor" class="table-of-contents__link">SpreadForeignRumor</a></li><li><a href="#stoprounds" class="table-of-contents__link">StopRounds</a></li></ul></li><li><a href="#rumor-state-machine" class="table-of-contents__link">Rumor State Machine</a></li><li><a href="#gossip-message-format" class="table-of-contents__link">Gossip Message Format</a></li><li><a href="#optimized-pull-push-mechanism" class="table-of-contents__link">Optimized Pull-Push Mechanism</a></li><li><a href="#message-subscription" class="table-of-contents__link">Message Subscription</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Developer Groups</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/invite/XMRE9tt" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://t.me/ZilliqaDevs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/zilliqa" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCvinnFbf0u71cajoxKcfZIQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Other Links</h4><ul class="footer__items"><li class="footer__item"><a href="https://blog.zilliqa.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/zilliqa" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2019 Zilliqa Research Pte. Ltd.</div></div></div></footer></div>
<script src="/styles.e6d5f6ad.js"></script>
<script src="/runtime~main.cfd4d3b6.js"></script>
<script src="/main.1791fe9a.js"></script>
<script src="/1.572a4dde.js"></script>
<script src="/2.69025b56.js"></script>
<script src="/194.93b79b72.js"></script>
<script src="/195.8bbd0729.js"></script>
<script src="/20ac7829.3f24c2c8.js"></script>
<script src="/17896441.4d4153da.js"></script>
<script src="/2171d30c.c8a81abc.js"></script>
</body>
</html>